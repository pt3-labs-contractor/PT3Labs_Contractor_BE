# PT3Labs_Contractor_BE

Back End

# API URL

https://fierce-plains-47590.herokuapp.com

# Schema

### Contractors

| field         | data type | metadata                           |
| ------------- | --------- | ---------------------------------- |
| id            | UUID      | primary key. generated by database |
| name          | text      | required                           |
| phoneNumber   | text      | required, unique                   |
| streetAddress | text      | required                           |
| city          | text      | required                           |
| stateAbbr     | text      | required. Char Limit 2             |
| zipCode       | text      | required. Char Limit 10            |
| createdAt     | timestamp | generated by database              |

### Schedules

| field        | data type   | metadata                              |
| ------------ | ----------- | --------------------------------------|
| id           | UUID        | primary key. generated by database    |
| contractorId | foreign key | Contractors(id) unique (w/ startTime) |
| startTime    | timestamp   | required unique (w/ contractoId)      |
| duration     | interval    | required                              |
| createdAt    | timestamp   | generated by database                 |

### Users

| field        | data type   | metadata                           |
| ------------ | ----------- | ---------------------------------- |
| id           | UUID        | primary key. generated by database |
| googleId*    | text        | unique                             |
| username     | text        | unique                             |
| password*    | text        | unique                             |
| phoneNumber  | text        | unique                             |
| email        | text        | unique                             |
| contractorId | foreign key | Contractors(id), defaults to null  |
| createdAt    | timestamp   | generated by database              |

\* CHECK constraint - Row must have either ID through OAuth (e.g. googleId) or local password

### Services

| field        | data type   | metadata                           |
| ------------ | ----------- | ---------------------------------- |
| id           | UUID        | primary key. generated by database |
| name         | text        | required                           |
| price        | money       | defaults to null                   |
| contractorId | foreign key | Contractors(id)                    |
| createdAt    | timestamp   | generated by database              |

### Appointments

| field               | data type   | metadata                           |
| ------------------- | ----------- | ---------------------------------- |
| id                  | UUID        | primary key. generated by database |
| userId*             | foreign key | Users(id)                          |
| contractorId*       | foreign key | Contractors(id)                    |
| serviceId*          | foreign key | Services(id)                       |
| scheduleId          | foreign key | Schedules(id)                      |
| startTime*| timestamp   | required                           |
| duration            | interval    | required                           |
| createdAt           | timestamp   | generated by database              |

\* Composite UNIQUE constraint - combination of userId, contractorId, serviceId, and startTime must be unique.

### Feedback

| field        | data type   | metadata                           |
| ------------ | ----------- | ---------------------------------- |
| id           | UUID        | primary key. generated by database |
| userId       | foreign key | Users(id)                          |
| contractorId | foreign key | Contractors(id)                    |
| stars        | integer     | required                           |
| message      | text        | required                           |
| createdAt    | timestamp   | generated by database              |
